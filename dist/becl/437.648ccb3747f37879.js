"use strict";(self.webpackChunkufps_becl_app=self.webpackChunkufps_becl_app||[]).push([[437],{437:($e,D,r)=>{r.r(D),r.d(D,{LockersModule:()=>Be});var p=r(6895),F=r(3060),S=r(1101),et=r(8437),T=r(7579),Y=r(2722),E=r(9646),g=r(4444),f=r(6308),c=r(671),u=r(4006),t=r(4650),k=r(1261),Z=r(529);let N=(()=>{class o{constructor(e){this.http=e,this.URL=`${k.N.baseUrlLocker}`}getSections(){return this.http.get(`${this.URL}sections`)}saveSection(e){return this.http.post(`${this.URL}section-save/`,e)}deleteSection(e){return this.http.delete(`${this.URL}section-delete/${e}`)}saveStaffSection(e){return this.http.post(`${this.URL}section-staff-save/`,e)}deleteStaffSection(e){return this.http.post(`${this.URL}section-staff-delete/`,e)}getSectionsForStaff(e){return this.http.get(`${this.URL}sections-staff/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var v=r(8386),ot=r(2687),x=r(1281),R=r(3353),d=r(3238),P=r(727),it=r(9770),y=r(6451),O=r(4968),C=r(8184),B=r(8605),nt=r(445),m=r(9521),at=r(4080),h=r(9549),st=r(8675),M=r(3900),L=r(5698),w=r(9300),rt=r(4004),Q=r(8505),ct=r(1005);const lt=["panel"];function ut(o,n){if(1&o&&(t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&o){const e=n.id,i=t.oxw();t.Q6J("id",i.id)("ngClass",i._classList),t.uIk("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(e))}}const pt=["*"];let dt=0;class mt{constructor(n,e){this.source=n,this.option=e}}const ht=(0,d.Kr)(class{}),q=new t.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function ft(){return{autoActiveFirstOption:!1}}});let _t=(()=>{class o extends ht{constructor(e,i,a,s){super(),this._changeDetectorRef=e,this._elementRef=i,this._activeOptionChanges=P.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.optionActivated=new t.vpe,this._classList={},this.id="mat-autocomplete-"+dt++,this.inertGroups=s?.SAFARI||!1,this._autoActiveFirstOption=!!a.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=(0,x.Ig)(e)}set classList(e){this._classList=e&&e.length?(0,x.du)(e).reduce((i,a)=>(i[a]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new ot.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const i=new mt(this,e);this.optionSelected.emit(i)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(q),t.Y36(R.t4))},o.\u0275dir=t.lG2({type:o,viewQuery:function(e,i){if(1&e&&(t.Gf(t.Rgc,7),t.Gf(lt,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.template=a.first),t.iGM(a=t.CRH())&&(i.panel=a.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[t.qOj]}),o})(),gt=(()=>{class o extends _t{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=t.n5z(o)))(i||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-autocomplete"]],contentQueries:function(e,i,a){if(1&e&&(t.Suo(a,d.K7,5),t.Suo(a,d.ey,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.optionGroups=s),t.iGM(s=t.CRH())&&(i.options=s)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[t._Bn([{provide:d.HF,useExisting:o}]),t.qOj],ngContentSelectors:pt,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,i){1&e&&(t.F$t(),t.YNc(0,ut,3,4,"ng-template"))},dependencies:[p.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),o})();const J=new t.OlP("mat-autocomplete-scroll-strategy"),yt={provide:J,deps:[C.aV],useFactory:function vt(o){return()=>o.scrollStrategies.reposition()}},Ct={provide:u.JU,useExisting:(0,t.Gpc)(()=>H),multi:!0};let At=(()=>{class o{constructor(e,i,a,s,l,_,Qe,qe,Je,He,Ie){this._element=e,this._overlay=i,this._viewContainerRef=a,this._zone=s,this._changeDetectorRef=l,this._dir=Qe,this._formField=qe,this._document=Je,this._viewportRuler=He,this._defaults=Ie,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=P.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new T.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,it.P)(()=>{const b=this.autocomplete?this.autocomplete.options:null;return b?b.changes.pipe((0,st.O)(b),(0,M.w)(()=>(0,y.T)(...b.map(ze=>ze.onSelectionChange)))):this._zone.onStable.pipe((0,L.q)(1),(0,M.w)(()=>this.optionSelections))}),this._scrollStrategy=_}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=(0,x.Ig)(e)}ngAfterViewInit(){const e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,y.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,w.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,w.h)(()=>this._overlayAttached)):(0,E.of)()).pipe((0,rt.U)(e=>e instanceof d.rN?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,y.T)((0,O.R)(this._document,"click"),(0,O.R)(this._document,"auxclick"),(0,O.R)(this._document,"touchend")).pipe((0,w.h)(e=>{const i=(0,R.sA)(e),a=this._formField?this._formField._elementRef.nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!a||!a.contains(i))&&(!s||!s.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(e){Promise.resolve().then(()=>this._setTriggerValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const i=e.keyCode,a=(0,m.Vb)(e);if(i===m.hY&&!a&&e.preventDefault(),this.activeOption&&i===m.K5&&this.panelOpen&&!a)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,l=i===m.LH||i===m.JH;i===m.Mf||l&&!a&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):l&&this._canOpen()&&this.openPanel(),(l||this.autocomplete._keyManager.activeItem!==s)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(e){let i=e.target,a=i.value;"number"===i.type&&(a=""==a?null:parseFloat(a)),this._previousValue!==a&&(this._previousValue=a,this._onChange(a),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const e=this._zone.onStable.pipe((0,L.q)(1)),i=this.autocomplete.options.changes.pipe((0,Q.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,ct.g)(0));return(0,y.T)(e,i).pipe((0,M.w)(()=>(this._zone.run(()=>{const a=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&(this._overlayRef.updatePosition(),a!==this.panelOpen&&this.autocomplete.opened.emit())}),this.panelClosingActions)),(0,L.q)(1)).subscribe(a=>this._setValueAndClose(a))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(e){const a=(this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e)??"";this._formField?this._formField._control.value=a:this._element.nativeElement.value=a,this._previousValue=a}_setValueAndClose(e){const i=e&&e.source;i&&(this._clearPreviousSelectedOption(i),this._setTriggerValue(i.value),this._onChange(i.value),this.autocomplete._emitSelectEvent(i),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(e){this.autocomplete.options.forEach(i=>{i!==e&&i.selected&&i.deselect()})}_attachOverlay(){let e=this._overlayRef;e?(this._positionStrategy.setOrigin(this._getConnectedElement()),e.updateSize({width:this._getPanelWidth()})):(this._portal=new at.UE(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),e=this._overlay.create(this._getOverlayConfig()),this._overlayRef=e,e.keydownEvents().subscribe(a=>{(a.keyCode===m.hY&&!(0,m.Vb)(a)||a.keyCode===m.LH&&(0,m.Vb)(a,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),a.stopPropagation(),a.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&e&&e.updateSize({width:this._getPanelWidth()})})),e&&!e.hasAttached()&&(e.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&i!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){return new C.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],a=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:a},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:a}];let l;l="above"===this.position?s:"below"===this.position?i:[...i,...s],e.withPositions(l)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;e.autoActiveFirstOption?e._keyManager.setFirstItemActive():e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){const i=this.autocomplete,a=(0,d.CB)(e,i.options,i.optionGroups);if(0===e&&1===a)i._setScrollTop(0);else if(i.panel){const s=i.options.toArray()[e];if(s){const l=s._getHostElement(),_=(0,d.jH)(l.offsetTop,l.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(_)}}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(C.aV),t.Y36(t.s_b),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(J),t.Y36(nt.Is,8),t.Y36(h.G_,9),t.Y36(p.K0,8),t.Y36(B.rL),t.Y36(q,8))},o.\u0275dir=t.lG2({type:o,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[t.TTD]}),o})(),H=(()=>{class o extends At{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=t.n5z(o)))(i||o)}}(),o.\u0275dir=t.lG2({type:o,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,i){1&e&&t.NdJ("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(s){return i._handleInput(s)})("keydown",function(s){return i._handleKeydown(s)})("click",function(){return i._handleClick()}),2&e&&t.uIk("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-owns",i.autocompleteDisabled||!i.panelOpen||null==i.autocomplete?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[t._Bn([Ct]),t.qOj]}),o})(),bt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[yt],imports:[[C.U8,d.Ng,d.BQ,p.ez],B.ZD,d.Ng,d.BQ]}),o})();var I=r(4859),z=r(7392),G=r(4144);function St(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clearFilter())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function Tt(o,n){1&o&&(t.TgZ(0,"th",55),t._uU(1," No. "),t.qZA())}function kt(o,n){if(1&o&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function Zt(o,n){1&o&&(t.TgZ(0,"th",55),t._uU(1," Secci\xf3n "),t.qZA())}function xt(o,n){if(1&o&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.section," ")}}function Ot(o,n){1&o&&(t.TgZ(0,"th",55),t._uU(1," Capacidad "),t.qZA())}function Mt(o,n){if(1&o&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.capacity," ")}}function Lt(o,n){1&o&&(t.TgZ(0,"th",55),t._uU(1," No. Staff's "),t.qZA())}function wt(o,n){if(1&o&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.staffs.length," ")}}function Ut(o,n){1&o&&(t.TgZ(0,"th",57),t._uU(1," Actions "),t.qZA())}function Dt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",56)(1,"button",58),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.sectionEdit(s))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",59),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.sectionDelete(s))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function Ft(o,n){1&o&&(t.TgZ(0,"td",60),t._uU(1," Loading data... "),t.qZA())}function Yt(o,n){1&o&&(t.TgZ(0,"td",60),t._uU(1," No data found. "),t.qZA())}function Et(o,n){1&o&&t._UZ(0,"tr",61)}function Nt(o,n){1&o&&t._UZ(0,"tr",62)}function Rt(o,n){if(1&o&&(t.TgZ(0,"mat-option",63),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.first_name+" "+e.last_name," ")}}function Pt(o,n){1&o&&(t.TgZ(0,"th",57),t._uU(1," Foto "),t.qZA())}function Bt(o,n){if(1&o&&(t.TgZ(0,"td",64)(1,"div",65),t._UZ(2,"img",66),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.s9C("alt",e.first_name),t.Q6J("src",e.picture,t.LSH)}}function Qt(o,n){1&o&&(t.TgZ(0,"th",55),t._uU(1," Nombre "),t.qZA())}function qt(o,n){if(1&o&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.first_name+" "+e.last_name," ")}}function Jt(o,n){1&o&&(t.TgZ(0,"th",57),t._uU(1," Acciones "),t.qZA())}function Ht(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",56)(1,"button",59),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.removeStaff(s))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function It(o,n){1&o&&t._UZ(0,"tr",61)}function zt(o,n){1&o&&t._UZ(0,"tr",62)}const j=function(o){return{hidden:o}},$t=function(){return[5,10,15,20]};let Gt=(()=>{class o{constructor(e,i){this.sectionService=e,this.usersService=i,this.displayedColumnsSection=["id","section","capacity","staffs","actions"],this.displayedColumnsStaff=["picture","name","actions"],this.unsubscribe$=new T.x,this.newSection=new u.nJ({section:new u.p4,capacity:new u.p4}),this.editSection=new u.nJ({section:new u.p4,capacity:new u.p4}),this.myControl=new u.p4(""),this.noEdit=!0}ngOnInit(){this.dsSection=new c.by,this.dsStaff=new c.by,this.sectionService.getSections().pipe((0,Y.R)(this.unsubscribe$)).subscribe(e=>{let i=e.map(({id:a,section:s,capacity:l,staffs:_})=>({id:a,section:s,capacity:l,staffs:_}));this.dsSection=new c.by(i),this.dsSection.paginator=this.paginator,this.dsSection.sort=this.sort}),this.myControl.valueChanges.subscribe(e=>{this.usersService.filterStaffByName(e).pipe((0,Y.R)(this.unsubscribe$)).subscribe(i=>{this.dsStaff.data.forEach(a=>{i.forEach(s=>{s.id==a.id&&i.splice(i.indexOf(s),1)})}),this.filteredOptions=(0,E.of)(i)})})}applyFilter(e){this.dsSection.filter=e.target.value.trim().toLowerCase(),this.dsSection.paginator&&this.dsSection.paginator.firstPage()}clearFilter(){this.dsSection.filter=""}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}mostrarModal(e){$("#modal-save").modal(e)}onSubmit(){this.sectionService.saveSection(this.newSection.value).subscribe(e=>{const i=this.dsSection.data;i.push(e),this.dsSection.data=i}),$("#modal-save").modal("hide")}selectedStaff(e){this.filteredOptions.forEach(i=>{i.forEach(a=>{if(a.id==e){const s=this.dsStaff.data;s.push(a),this.dsStaff.data=s}})}),this.sectionService.saveStaffSection({section_id:this.currentSection.id,staff_id:e}).subscribe(i=>{this.currentSection.staffs.push(i)}),this.myControl.setValue(null)}sectionEdit(e){this.dsStaff=new c.by,this.currentSection=e,this.editSection.setValue({section:e.section,capacity:e.capacity});const i=this.dsStaff.data;e.staffs.forEach(a=>{this.usersService.getStaffById(a.staff_id).subscribe(s=>{i.push({id:s.id,first_name:s.first_name,last_name:s.last_name,picture:s.picture}),this.dsStaff.data=i})}),this.noEdit=!1}sectionDelete(e){const i=this.dsSection.data;this.sectionService.deleteSection(e.id).subscribe(a=>{i.forEach((s,l)=>{s.id==a.id&&i.splice(l,1)}),this.dsSection.data=i}),this.dsStaff=new c.by,this.editSection.reset(),this.noEdit=!0}removeStaff(e){const i=this.dsStaff.data.indexOf(e);this.dsStaff.data.splice(i,1),this.dsStaff._updateChangeSubscription(),this.sectionService.deleteStaffSection({section_id:this.currentSection.id,staff_id:e.id}).subscribe(a=>{this.currentSection.staffs.forEach((s,l)=>{s.staff_id==e.id&&this.currentSection.staffs.splice(l,1)})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(N),t.Y36(v.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-manage-locker"]],viewQuery:function(e,i){if(1&e&&(t.Gf(g.NW,5),t.Gf(f.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},decls:93,vars:26,consts:[["id","modal-save","tabindex","-1","role","dialog",1,"modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","prefijo"],["type","text","id","prefijo","formControlName","section","placeholder","Prefijo","maxlength","1",1,"form-control"],["for","capacity"],["type","text","maxlength","3","id","capacity","formControlName","capacity","placeholder","Capacidad",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-outline-success"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"search-form-field"],["matInput","","placeholder","Search","autocomplete","off",3,"keyup"],["input",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"mat-elevation-z8","align-self-start","mr-2"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","section"],["matColumnDef","capacity"],["matColumnDef","staffs"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","loading"],["mat-footer-cell","","colspan","8",4,"matFooterCellDef"],["matColumnDef","noData"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","pageSize"],[1,"mat-elevation-z8","flex-fill"],["type","text","id","prefijo","formControlName","section","placeholder","Secci\xf3n","maxlength","1",1,"form-control",3,"readonly"],["type","text","maxlength","3","id","capacity","formControlName","capacity","placeholder","Capacidad",1,"form-control",3,"readonly"],[1,"align-self-start","mr-2","flex-fill"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","Nombre","matInput","",3,"readonly","formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-fill"],["mat-table","","matSort","",1,"table",3,"dataSource"],["matColumnDef","picture"],["mat-cell","","class","avatar-sm",4,"matCellDef"],["matColumnDef","name"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-footer-cell","","colspan","8"],["mat-header-row",""],["mat-row",""],[3,"value"],["mat-cell","",1,"avatar-sm"],[1,"d-flex","align-items-center"],[1,"rounded-circle",2,"width","45px","height","45px",3,"src","alt"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5,"Guardar Secci\xf3n"),t.qZA(),t.TgZ(6,"button",5)(7,"span",6),t._uU(8,"\xd7"),t.qZA()()(),t.TgZ(9,"div",7)(10,"form",8),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(11,"div",9)(12,"label",10),t._uU(13,"Prefijo"),t.qZA(),t._UZ(14,"input",11),t.qZA(),t.TgZ(15,"div",9)(16,"label",12),t._uU(17,"Capacidad"),t.qZA(),t._UZ(18,"input",13),t.qZA(),t.TgZ(19,"div",14)(20,"button",15),t._uU(21,"Guardar"),t.qZA(),t.TgZ(22,"button",16),t.NdJ("click",function(){return i.mostrarModal("hide")}),t._uU(23,"Cerrar"),t.qZA()()()()()()(),t.TgZ(24,"div")(25,"button",17),t.NdJ("click",function(){return i.mostrarModal("show")}),t._uU(26,"Guardar secci\xf3n"),t.qZA()(),t.TgZ(27,"mat-form-field",18)(28,"input",19,20),t.NdJ("keyup",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(30,St,3,0,"button",21),t.qZA(),t.TgZ(31,"div",22)(32,"div",23)(33,"table",24),t.ynx(34,25),t.YNc(35,Tt,2,0,"th",26),t.YNc(36,kt,2,1,"td",27),t.BQk(),t.ynx(37,28),t.YNc(38,Zt,2,0,"th",26),t.YNc(39,xt,2,1,"td",27),t.BQk(),t.ynx(40,29),t.YNc(41,Ot,2,0,"th",26),t.YNc(42,Mt,2,1,"td",27),t.BQk(),t.ynx(43,30),t.YNc(44,Lt,2,0,"th",26),t.YNc(45,wt,2,1,"td",27),t.BQk(),t.ynx(46,31),t.YNc(47,Ut,2,0,"th",32),t.YNc(48,Dt,7,0,"td",27),t.BQk(),t.ynx(49,33),t.YNc(50,Ft,2,0,"td",34),t.BQk(),t.ynx(51,35),t.YNc(52,Yt,2,0,"td",34),t.BQk(),t.YNc(53,Et,1,0,"tr",36),t.YNc(54,Nt,1,0,"tr",37),t._UZ(55,"tr",38)(56,"tr",38),t.qZA(),t._UZ(57,"mat-paginator",39),t.qZA(),t.TgZ(58,"div",40)(59,"form",8),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(60,"div",9)(61,"label",10),t._uU(62,"Secci\xf3n"),t.qZA(),t._UZ(63,"input",41),t.qZA(),t.TgZ(64,"div",9)(65,"label",12),t._uU(66,"Capacidad"),t.qZA(),t._UZ(67,"input",42),t.qZA(),t.TgZ(68,"div",22)(69,"div",43)(70,"div",9)(71,"mat-form-field",44)(72,"mat-label"),t._uU(73,"Staff"),t.qZA(),t._UZ(74,"input",45),t.TgZ(75,"mat-autocomplete",46,47),t.NdJ("optionSelected",function(s){return i.selectedStaff(s.option.value)}),t.YNc(77,Rt,2,2,"mat-option",48),t.ALo(78,"async"),t.qZA()()()(),t.TgZ(79,"div",49)(80,"div",9)(81,"table",50),t.ynx(82,51),t.YNc(83,Pt,2,0,"th",32),t.YNc(84,Bt,3,2,"td",52),t.BQk(),t.ynx(85,53),t.YNc(86,Qt,2,0,"th",26),t.YNc(87,qt,2,1,"td",27),t.BQk(),t.ynx(88,31),t.YNc(89,Jt,2,0,"th",32),t.YNc(90,Ht,4,0,"td",27),t.BQk(),t.YNc(91,It,1,0,"tr",36),t.YNc(92,zt,1,0,"tr",37),t.qZA()()()()()()()),2&e){const a=t.MAs(29),s=t.MAs(76);t.xp6(10),t.Q6J("formGroup",i.newSection),t.xp6(20),t.Q6J("ngIf",a.value),t.xp6(3),t.Q6J("dataSource",i.dsSection),t.xp6(20),t.Q6J("matHeaderRowDef",i.displayedColumnsSection),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumnsSection),t.xp6(1),t.Q6J("ngClass",t.VKq(21,j,void 0!==i.dsSection)),t.xp6(1),t.Q6J("ngClass",t.VKq(23,j,!(void 0!==i.dsSection&&0==i.dsSection.data.length))),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(25,$t))("pageSize",5),t.xp6(2),t.Q6J("formGroup",i.editSection),t.xp6(4),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(7),t.Q6J("readonly",i.noEdit)("formControl",i.myControl)("matAutocomplete",s),t.xp6(3),t.Q6J("ngForOf",t.lcZ(78,19,i.filteredOptions)),t.xp6(4),t.Q6J("dataSource",i.dsStaff),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumnsStaff),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumnsStaff)}},dependencies:[p.mk,p.sg,p.O5,gt,H,d.ey,h.KE,h.hX,h.R9,I.lW,z.Hw,G.Nt,g.NW,f.YE,f.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.mD,c.ge,c.ev,c.yh,c.XQ,c.Gk,c.Q2,u._Y,u.Fj,u.JJ,u.JL,u.nD,u.oH,u.sg,u.u,p.Ov],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),o})();function U(o){this.message=o}(U.prototype=new Error).name="InvalidCharacterError";var V=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(o){var n=String(o).replace(/=+$/,"");if(n.length%4==1)throw new U("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,i,a=0,s=0,l="";i=n.charAt(s++);~i&&(e=a%4?64*e+i:i,a++%4)?l+=String.fromCharCode(255&e>>(-2*a&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return l};function A(o){this.message=o}(A.prototype=new Error).name="InvalidTokenError";let K=(()=>{class o{constructor(e){this.http=e,this.URL=`${k.N.baseUrlLocker}`}getLockersBySection(e){return this.http.get(`${this.URL}lockers-section/${e}`)}acquireLocker(e){return this.http.post(`${this.URL}action-locker/`,e)}operationLogLockers(e){return this.http.post(`${this.URL}operation-locker/`,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var W=r(4385);let Wt=(()=>{class o{constructor(e){this.usersService=e,this.userEvent=new t.vpe}ngOnInit(){this.locker||(this.locker={},this.locker.locker="")}isLockerDefault(){return""==this.locker.locker}getColorCard(){return this.isLockerDefault()?"btn-secondary":this.locker.available?"btn-success":"btn-danger"}searchUser(){this.isLockerDefault()||(this.locker.available||this.user?this.locker&&this.user&&this.userEvent.emit(this.user):this.usersService.getUserById(this.locker.user_id).subscribe(e=>{this.user=e,this.userEvent.emit(this.user)}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cards"]],inputs:{locker:"locker"},outputs:{userEvent:"userEvent"},decls:4,vars:2,consts:[[1,"card","my-3"],[1,"card-body",3,"ngClass","click"],[1,"card-title","text-center","text-white"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return i.searchUser()}),t.TgZ(2,"h3",2),t._uU(3),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngClass",i.getColorCard()),t.xp6(2),t.Oqu(i.locker.locker))},dependencies:[p.mk],styles:[".card[_ngcontent-%COMP%]{width:80px;height:100px;margin:0 5px}"]}),o})();function Xt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",25),t.NdJ("onSelectionChange",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.getLockers(s))}),t._uU(1),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.section," ")}}function te(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"app-cards",26),t.NdJ("userEvent",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.setUser(a))}),t.qZA()()}if(2&o){const e=n.$implicit;t.xp6(1),t.Q6J("locker",e)}}let ee=(()=>{class o{constructor(e,i,a){this.sectionService=e,this.lockersService=i,this.usersService=a,this.currentLockerUser={},this.qrReader=new u.cw({token:new u.NI,id_section:new u.NI,id_staff:new u.NI(this.usersService.currentUser.id)}),this.currentLockerUser.picture="becl/assets/img/no-profile.png",this.currentLockerUser.program={},this.currentLockerUser.first_name="",this.currentLockerUser.program.name=""}ngOnInit(){this.sectionService.getSectionsForStaff(this.usersService.currentUser.id).subscribe(e=>{this.asignedSection=e})}onChange(){let e=this.getDecodedAccessToken(this.qrReader.controls.token.value);e&&(this.usersService.getUserById(e.id).subscribe(i=>{this.currentLockerUser=i}),this.lockersService.acquireLocker(this.qrReader.value).subscribe(i=>{this.currentLockers.forEach(a=>{a.locker==i.locker&&(a.available=i.available,this.lastLockerOperation=a)})})),console.log(e)}getDecodedAccessToken(e){try{return function Vt(o,n){if("string"!=typeof o)throw new A("Invalid token specified");var e=!0===(n=n||{}).header?0:1;try{return JSON.parse(function jt(o){var n=o.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(V(n).replace(/(.)/g,function(i,a){var s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}catch{return V(n)}}(o.split(".")[e]))}catch(i){throw new A("Invalid token specified: "+i.message)}}(e)}catch{return null}}setUser(e){this.currentLockerUser=e}getLockers(e){this.qrReader.controls.id_section.patchValue(e.id),this.lockersService.getLockersBySection(e.id).subscribe(i=>{this.currentLockers=i})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(N),t.Y36(K),t.Y36(v.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-lockers"]],decls:36,vars:9,consts:[["id","modal-save","tabindex","-1","role","dialog",1,"modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["appearance","fill"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],[1,"mat-elevation-z8","align-self-start","w-25","mr-3"],[3,"formGroup"],[1,"form-group"],["type","text","id","token","formControlName","token","placeholder","C\xf3digo QR",1,"form-control",3,"input"],[1,"d-flex","flex-xl-column","align-items-center"],[1,"rounded-circle",2,"width","100px","height","100px",3,"src"],["for","prefijo"],["type","text","id","usuario",1,"form-control",3,"value","readonly"],["for","capacity"],["type","text","id","programa",1,"form-control",3,"value","readonly"],[3,"locker"],[1,"cards-container","mat-elevation-z8","w-75"],[1,"d-flex","align-content-start","flex-wrap"],[4,"ngFor","ngForOf"],[3,"value","onSelectionChange"],[3,"locker","userEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5,"Guardar Secci\xf3n"),t.qZA(),t.TgZ(6,"button",5)(7,"span",6),t._uU(8,"\xd7"),t.qZA()()(),t._UZ(9,"div",7),t.qZA()()(),t.TgZ(10,"mat-form-field",8)(11,"mat-label"),t._uU(12,"Secciones"),t.qZA(),t.TgZ(13,"mat-select"),t.YNc(14,Xt,2,2,"mat-option",9),t.qZA()(),t.TgZ(15,"div",10)(16,"div",11),t.ynx(17),t.TgZ(18,"form",12)(19,"div",13)(20,"input",14),t.NdJ("input",function(){return i.onChange()}),t.qZA()()(),t.BQk(),t.ynx(21),t.TgZ(22,"div",15),t._UZ(23,"img",16),t.TgZ(24,"div",13)(25,"label",17),t._uU(26,"Usuario"),t.qZA(),t._UZ(27,"input",18),t.qZA(),t.TgZ(28,"div",13)(29,"label",19),t._uU(30,"Programa"),t.qZA(),t._UZ(31,"input",20),t.qZA(),t._UZ(32,"app-cards",21),t.qZA(),t.BQk(),t.qZA(),t.TgZ(33,"div",22)(34,"div",23),t.YNc(35,te,2,1,"div",24),t.qZA()()()),2&e&&(t.xp6(14),t.Q6J("ngForOf",i.asignedSection),t.xp6(4),t.Q6J("formGroup",i.qrReader),t.xp6(5),t.Q6J("src",i.currentLockerUser.picture,t.LSH),t.xp6(4),t.Q6J("value",i.currentLockerUser.first_name)("readonly",!0),t.xp6(4),t.Q6J("value",i.currentLockerUser.program.name)("readonly",!0),t.xp6(1),t.Q6J("locker",i.lastLockerOperation),t.xp6(3),t.Q6J("ngForOf",i.currentLockers))},dependencies:[p.sg,d.ey,h.KE,h.hX,W.gD,Wt,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u],styles:[".cards-container[_ngcontent-%COMP%]{max-height:100vh;overflow-y:scroll}"]}),o})();var oe=r(1135);let ie=(()=>{class o{constructor(e){this.http=e,this.url=`${k.N.baseUrlUser}`,this.userSubject=new oe.X({}),this.users=this.userSubject.asObservable()}setUsers(e){return this.http.post(`${this.url}list_users_by_ids/`,{id_users:e}).pipe((0,Q.b)(i=>{const a={};i.forEach(s=>{a[s.id]=s}),this.userSubject.next(a)}))}get usersValue(){return this.userSubject.getValue()}get currentusers(){return this.users}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),X=(()=>{class o{transform(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"capitalize",type:o,pure:!0}),o})();function ne(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clearFilter())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function ae(o,n){1&o&&(t.TgZ(0,"th",29),t._uU(1," No. "),t.qZA())}function se(o,n){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=n.index;t.xp6(1),t.hij(" ",e+1," ")}}function re(o,n){1&o&&(t.TgZ(0,"th",29),t._uU(1," Staff Entrada "),t.qZA())}function ce(o,n){if(1&o&&(t.TgZ(0,"td",30)(1,"small"),t._uU(2),t.ALo(3,"capitalize"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"small"),t._uU(6),t.ALo(7,"capitalize"),t.qZA()()),2&o){const e=n.$implicit,i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,i.getSecureProperty("first_name",e.staff_lock_id))),t.xp6(4),t.Oqu(t.lcZ(7,4,i.getSecureProperty("last_name",e.staff_lock_id)))}}function le(o,n){1&o&&t._UZ(0,"th",31)}function ue(o,n){if(1&o&&(t.TgZ(0,"td",32),t._UZ(1,"img",33),t.qZA()),2&o){const e=n.$implicit,i=t.oxw();t.xp6(1),t.s9C("alt",e.first_name),t.Q6J("src",i.getSecureProperty("picture",e.staff_lock_id),t.LSH)}}function pe(o,n){1&o&&(t.TgZ(0,"th",29),t._uU(1," Staff Salida "),t.qZA())}function de(o,n){if(1&o&&(t.TgZ(0,"td",30)(1,"small"),t._uU(2),t.ALo(3,"capitalize"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"small"),t._uU(6),t.ALo(7,"capitalize"),t.qZA()()),2&o){const e=n.$implicit,i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,i.getSecureProperty("first_name",e.staff_release_id))),t.xp6(4),t.Oqu(t.lcZ(7,4,i.getSecureProperty("last_name",e.staff_release_id)))}}function me(o,n){1&o&&t._UZ(0,"th",31)}function he(o,n){if(1&o&&(t.TgZ(0,"td",32),t._UZ(1,"img",33),t.qZA()),2&o){const e=n.$implicit,i=t.oxw();t.xp6(1),t.s9C("alt",e.first_name),t.Q6J("src",i.getSecureProperty("picture",e.staff_release_id),t.LSH)}}function fe(o,n){1&o&&(t.TgZ(0,"th",29),t._uU(1," User "),t.qZA())}function _e(o,n){if(1&o&&(t.TgZ(0,"td",30)(1,"small"),t._uU(2),t.ALo(3,"capitalize"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"small"),t._uU(6),t.ALo(7,"capitalize"),t.qZA()()),2&o){const e=n.$implicit,i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,i.getSecureProperty("first_name",e.user_id))),t.xp6(4),t.Oqu(t.lcZ(7,4,i.getSecureProperty("last_name",e.user_id)))}}function ge(o,n){1&o&&t._UZ(0,"th",31)}function ve(o,n){if(1&o&&(t.TgZ(0,"td",32),t._UZ(1,"img",33),t.qZA()),2&o){const e=n.$implicit,i=t.oxw();t.xp6(1),t.s9C("alt",e.first_name),t.Q6J("src",i.getSecureProperty("picture",e.user_id),t.LSH)}}function ye(o,n){1&o&&(t.TgZ(0,"th",29),t._uU(1," Fecha Entrada "),t.qZA())}function Ce(o,n){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.start_time_use,"MMMM dd, YYYY")," ")}}function Ae(o,n){1&o&&(t.TgZ(0,"th",29),t._uU(1," Hora Entrada "),t.qZA())}function be(o,n){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.start_time_use,"HH:mm:ss")," ")}}function Se(o,n){1&o&&(t.TgZ(0,"th",29),t._uU(1," Fecha Salida "),t.qZA())}function Te(o,n){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.end_time_use,"MMMM dd, YYYY")," ")}}function ke(o,n){1&o&&(t.TgZ(0,"th",29),t._uU(1," Hora Salida "),t.qZA())}function Ze(o,n){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.end_time_use,"HH:mm:ss")," ")}}function xe(o,n){1&o&&(t.TgZ(0,"td",34),t._uU(1," Loading data... "),t.qZA())}function Oe(o,n){1&o&&(t.TgZ(0,"td",34),t._uU(1," No data found. "),t.qZA())}function Me(o,n){1&o&&t._UZ(0,"tr",35)}function Le(o,n){1&o&&t._UZ(0,"tr",36)}const tt=function(o){return{hidden:o}};function we(o,n){if(1&o&&t._UZ(0,"tr",37),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,tt,void 0!==e.dataSource))}}function Ue(o,n){if(1&o&&t._UZ(0,"tr",37),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,tt,!(void 0!==e.dataSource&&0==e.dataSource.data.length)))}}const De=function(){return["loading"]},Fe=function(){return["noData"]},Ye=function(){return[5,10,15,20]},Ne=[{path:"",component:et.p,children:[{path:"manage-lockers",component:Gt,canActivate:[S._],data:{title:"Administrar Lockers",rol:"ADMIN"}},{path:"auditar-lockers",component:(()=>{class o{constructor(e,i,a){this.lockersService=e,this.userOperationService=i,this.usersService=a,this.displayedColumns=["id","picture_user_locker","first_name_user_locker","date_entry","time_entry","date_exit","time_exit","picture_staff_lock","first_name_staff_lock","picture_staff_release","first_name_staff_release"],this.unsubscribe$=new T.x,this.users=[],this.hashUsers={},this.operations=[],this.pageSize=5,this.currentPage=0,this.totalSize=0}ngOnInit(){this.hashUsers[0]={},this.hashUsers[0].picture="becl/assets/img/no-profile.png",this.lockersService.operationLogLockers({page:0,size_page:10}).subscribe(e=>{this.operations=e,this.setUsers()})}handlePage(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.fetchData()}fetchData(){this.lockersService.operationLogLockers({page:this.currentPage,size_page:this.pageSize}).subscribe(e=>{this.operations=e,this.setUsers()})}onlyUnique(e,i,a){return a.indexOf(e)===i}setUsers(){this.operations.forEach(e=>{this.users.push(e.user_id??0),this.users.push(e.staff_lock_id??0),this.users.push(e.staff_release_id??0)}),this.users=this.users.filter(this.onlyUnique),console.log(this.users),this.usersSubscription=this.userOperationService.setUsers(this.users).subscribe(e=>{e.forEach(i=>{this.hashUsers[i.id]=i}),this.dataSource=new c.by(this.operations),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}getSecureProperty(e,i){return this.hashUsers[i??0][e]}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}clearFilter(){this.dataSource.filter=""}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.usersSubscription?.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(K),t.Y36(ie),t.Y36(v.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-audi"]],viewQuery:function(e,i){if(1&e&&(t.Gf(g.NW,5),t.Gf(f.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},decls:49,vars:13,consts:[[1,"search-form-field"],["matInput","","placeholder","Search","autocomplete","off",3,"keyup"],["input",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","first_name_staff_lock"],["matColumnDef","picture_staff_lock"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","avatar-sm",4,"matCellDef"],["matColumnDef","first_name_staff_release"],["matColumnDef","picture_staff_release"],["matColumnDef","first_name_user_locker"],["matColumnDef","picture_user_locker"],["matColumnDef","date_entry"],["matColumnDef","time_entry"],["matColumnDef","date_exit"],["matColumnDef","time_exit"],["matColumnDef","loading"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["matColumnDef","noData"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","pageSize","length","pageIndex","page"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"avatar-sm"],[1,"avatar-img","rounded-circle",3,"src","alt"],["mat-footer-cell","","colspan","4"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"ngClass"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-form-field",0)(1,"input",1,2),t.NdJ("keyup",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(3,ne,3,0,"button",3),t.qZA(),t.TgZ(4,"div",4)(5,"table",5),t.ynx(6,6),t.YNc(7,ae,2,0,"th",7),t.YNc(8,se,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,re,2,0,"th",7),t.YNc(11,ce,8,6,"td",8),t.BQk(),t.ynx(12,10),t.YNc(13,le,1,0,"th",11),t.YNc(14,ue,2,2,"td",12),t.BQk(),t.ynx(15,13),t.YNc(16,pe,2,0,"th",7),t.YNc(17,de,8,6,"td",8),t.BQk(),t.ynx(18,14),t.YNc(19,me,1,0,"th",11),t.YNc(20,he,2,2,"td",12),t.BQk(),t.ynx(21,15),t.YNc(22,fe,2,0,"th",7),t.YNc(23,_e,8,6,"td",8),t.BQk(),t.ynx(24,16),t.YNc(25,ge,1,0,"th",11),t.YNc(26,ve,2,2,"td",12),t.BQk(),t._uU(27,"formatDate "),t.ynx(28,17),t.YNc(29,ye,2,0,"th",7),t.YNc(30,Ce,3,4,"td",8),t.BQk(),t.ynx(31,18),t.YNc(32,Ae,2,0,"th",7),t.YNc(33,be,3,4,"td",8),t.BQk(),t.ynx(34,19),t.YNc(35,Se,2,0,"th",7),t.YNc(36,Te,3,4,"td",8),t.BQk(),t.ynx(37,20),t.YNc(38,ke,2,0,"th",7),t.YNc(39,Ze,3,4,"td",8),t.BQk(),t.ynx(40,21),t.YNc(41,xe,2,0,"td",22),t.BQk(),t.ynx(42,23),t.YNc(43,Oe,2,0,"td",22),t.BQk(),t.YNc(44,Me,1,0,"tr",24),t.YNc(45,Le,1,0,"tr",25),t.YNc(46,we,1,3,"tr",26),t.YNc(47,Ue,1,3,"tr",26),t.qZA(),t.TgZ(48,"mat-paginator",27),t.NdJ("page",function(s){return i.handlePage(s)}),t.qZA()()),2&e){const a=t.MAs(2);t.xp6(3),t.Q6J("ngIf",a.value),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(39),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(10,De)),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(11,Fe)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(12,Ye))("pageSize",i.pageSize)("length",i.totalSize)("pageIndex",i.currentPage)}},dependencies:[p.mk,p.O5,h.KE,h.R9,I.lW,z.Hw,G.Nt,g.NW,f.YE,f.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.mD,c.Ke,c.ge,c.ev,c.yh,c.XQ,c.Gk,c.Q2,p.uU,X],styles:["table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.hidden[_ngcontent-%COMP%]{display:none}.mat-column-first_name[_ngcontent-%COMP%]{padding-left:10px}"]}),o})(),canActivate:[S._],data:{title:"Lockers",rol:"LOCKER"}},{path:"lockers",component:ee,canActivate:[S._],data:{title:"Lockers",rol:"LOCKER"}},{path:"**",redirectTo:"manage-lockers",pathMatch:"full"}]}];let Re=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[F.Bz.forChild(Ne),F.Bz]}),o})();var Pe=r(9547);let Be=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,bt,W.LD,Re,Pe.I,u.UX]}),o})()}}]);